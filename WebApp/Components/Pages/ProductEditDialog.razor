@using StoreApi.Entities
@inject ISnackbar Snackbar

<MudDialog>
	<TitleContent>
		<MudText Typo="Typo.h6">
			<MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3 mb-n1"/>
			Update Product (@Product.ProductId)
		</MudText>
	</TitleContent>
	<DialogContent>
		<MudTextField @bind-Value="Product.ProductName" Label="Name" ReadOnly="false" Required="true" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.Brand" Label="Brand" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.Price" Label="Price" Adornment="Adornment.End" AdornmentText="kr" AdornmentColor="Color.Info" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.StockQuantity" Label="Quantity" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.ImageUrl" Label="ImageUrl" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.TireSize" Label="Tire Size" ReadOnly="false" Adornment="Adornment.End" AdornmentColor="Color.Info" AdornmentText='"'  Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.MaxRange" Label="Max Range" HelperText="(in km)" Adornment="Adornment.End" AdornmentText="km" AdornmentColor="Color.Info" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.MaxSpeed" HelperText="(in km/h)" Label="Max Speed" ReadOnly="false" Adornment="Adornment.End" AdornmentColor="Color.Info" AdornmentText="km/h" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.Weight" Label="Weight" HelperText="(in Kg)" ReadOnly="false" Adornment="Adornment.End" AdornmentColor="Color.Info" AdornmentText="kg" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.BatteryCapacity" Label="Battery Capacity"  HelperText="(in Wh)" AdornmentColor="Color.Info" Adornment="Adornment.End" AdornmentText="Wh" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudCheckBox @bind-Value="Product.HasSuspension" Label="Has Suspension?" ReadOnly="false" Required="false" Variant="Variant.Outlined" ShrinkLabel />
		<MudTextField @bind-Value="Product.Description" Label="Description" ReadOnly="false" Required="false" Variant="Variant.Outlined" AutoGrow="true" ShrinkLabel />
	</DialogContent>
	<DialogActions>
		<MudButton OnClick="Cancel">Cancel</MudButton>
		<MudButton Color="Color.Primary" OnClick="UpdateProduct">Update Product</MudButton>
	</DialogActions>
</MudDialog>

@code {
	[CascadingParameter]
	private IMudDialogInstance MudDialog { get; set; }

	[Parameter]
	public Product Product { get; set; } 

	private void Cancel()
	{
		Snackbar.Add("Canceled, Product not updated", Severity.Error);
		MudDialog.Close(DialogResult.Cancel());
	}
		

	private void UpdateProduct()
	{
		//In a real world scenario this bool would probably be a service to delete the item from api/database
		Snackbar.Add("Product Updated", Severity.Success);
		MudDialog.Close(DialogResult.Ok(Product));
	}
}